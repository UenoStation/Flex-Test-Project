<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="init()">

	<fx:Script>
		<![CDATA[
			import mx.rpc.events.ResultEvent;
			import mx.controls.Alert;
			import mx.rpc.events.FaultEvent;
			import nl.demonsters.debugger.MonsterDebugger;
			
			[Bindable]
			private var _xString : String = 'xml/dataControls.xml';
			[Bindable]
			private var _obj : XMLList;
			private var debug : MonsterDebugger;
			
			private function init() : void
			{
				debug = new MonsterDebugger(this);
				myxml.send();
			}
			
			private function showAll( event : ResultEvent ) : void
			{
				_obj = XMLList(event.target.lastResult.control.properties.property);
				MonsterDebugger.trace(this, _obj);
			}
			
			private function faultHandle(event:FaultEvent) : void 
            { 
                Alert.show(event.fault.message, "Error"); 
            }
            
            private function propNameLabelFunc( item:Object, column:DataGridColumn ) : String
            {
            	return item.@name; 
            }
            
            private function propDescripLabelFunc( item:Object, column:DataGridColumn ) : String
            {
            	return item.@description;
            }
			
		]]>
	</fx:Script>

	<fx:Declarations>
		<mx:HTTPService id="myxml" url="{ _xString }" resultFormat="e4x" result="showAll(event)"  fault="faultHandle(event)" />
	</fx:Declarations>

	<mx:DataGrid id="grid" width="100%" dataProvider="{ _obj }">
		<mx:columns>
			<mx:DataGridColumn headerText="Property Name"
				labelFunction="propNameLabelFunc"/>
			<mx:DataGridColumn headerText="Property Description" labelFunction="propDescripLabelFunc" />
		</mx:columns>
	</mx:DataGrid>

</s:Application>